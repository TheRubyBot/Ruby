var C=Object.create;var c=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var S=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var d=i=>c(i,"__esModule",{value:!0});var I=(i,e)=>{for(var t in e)c(i,t,{get:e[t],enumerable:!0})},n=(i,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of u(e))!E.call(i,r)&&(t||r!=="default")&&c(i,r,{get:()=>e[r],enumerable:!(o=P(e,r))||o.enumerable});return i},p=(i,e)=>n(d(c(i!=null?C(S(i)):{},"default",!e&&i&&i.__esModule?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i),M=(i=>(e,t)=>i&&i.get(e)||(t=n(d({}),e,1),i&&i.set(e,t),t))(typeof WeakMap!="undefined"?new WeakMap:0);var v=(i,e,t)=>new Promise((o,r)=>{var w=a=>{try{m(t.next(a))}catch(l){r(l)}},y=a=>{try{m(t.throw(a))}catch(l){r(l)}},m=a=>a.done?o(a.value):Promise.resolve(a.value).then(w,y);m((t=t.apply(i,e)).next())});var s={};I(s,{Bot:()=>B});var g=require("discord.js"),h=p(require("ora")),f=require("@prisma/client"),D=p(require("./util/getVersion")),$=require("path");n(s,require("./constructors/ApplicationCommandConstructor"));n(s,require("./constructors/OptionBuilder"));class B{constructor({commandsDir:e,eventsDir:t,owners:o,devMode:r}){this.version=(0,D.default)();this.$commandsDir="./commands";this.$eventsDir="./events";this.$owners=[];this.$devMode=!1;this.clientSpinner=(0,h.default)("Starting client...").start();this.prismaSpinner=(0,h.default)("Starting prisma...").start();this.$client=new g.Client({intents:["GUILD_MESSAGES","GUILD_MEMBERS","GUILD_PRESENCES","GUILDS"]}),this.$prisma=new f.PrismaClient,this.$prisma.$connect().then(()=>this.prismaSpinner.succeed("Prisma ready")),this.$client.on("ready",()=>v(this,null,function*(){this.setPresence(),this.clientSpinner.succeed(`Logged in as ${this.$client.user.tag}`),yield this.$client.application.fetch(),this.$owners.push(this.$client.application.owner.id)})),this.$commandsDir=e||this.$commandsDir,this.$eventsDir=t||this.$eventsDir,this.correctPaths(),this.$devMode=r||this.$devMode,this.verifyOwners(o)}setPresence(){this.$client.user.setPresence({activities:[{name:`Using version ${this.version.string}`}]})}correctPaths(){let e;require.main&&(e=require.main.path)&&(this.$commandsDir=(0,$.join)(e,this.$commandsDir),this.$eventsDir=(0,$.join)(e,this.$eventsDir))}verifyOwners(e){for(const t of e)this.$client.users.fetch(t).catch(()=>{throw new Error(`Owner ${t} does not exist.`)}),this.$owners.push(t)}login(e){return new Promise((t,o)=>{this.$client.login(e).catch(o),t(this.$client)})}get client(){return this.$client}get prisma(){return this.$prisma}}module.exports=M(s);0&&(module.exports={Bot});
//# sourceMappingURL=bot.js.map
