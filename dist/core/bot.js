var P=Object.create;var c=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var S=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var $=e=>c(e,"__esModule",{value:!0});var M=(e,i)=>{for(var t in i)c(e,t,{get:i[t],enumerable:!0})},s=(e,i,t,o)=>{if(i&&typeof i=="object"||typeof i=="function")for(let n of I(i))!L.call(e,n)&&(t||n!=="default")&&c(e,n,{get:()=>i[n],enumerable:!(o=E(i,n))||o.enumerable});return e},g=(e,i)=>s($(c(e!=null?P(S(e)):{},"default",!i&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),A=(e=>(i,t)=>e&&e.get(i)||(t=s($({}),i,1),e&&e.set(i,t),t))(typeof WeakMap!="undefined"?new WeakMap:0);var v=(e,i,t)=>new Promise((o,n)=>{var d=a=>{try{l(t.next(a))}catch(p){n(p)}},y=a=>{try{l(t.throw(a))}catch(p){n(p)}},l=a=>a.done?o(a.value):Promise.resolve(a.value).then(d,y);l((t=t.apply(e,i)).next())});var r={};M(r,{Bot:()=>B});var f=require("discord.js"),m=g(require("ora")),D=require("@prisma/client"),C=g(require("./util/getVersion")),h=require("path"),w=require("./util/readDir"),u=require("./handlers/ApplicationCommandHandler");s(r,require("./constructors/ApplicationCommandConstructor"));s(r,require("./constructors/OptionBuilder"));class B{constructor({commandsDir:i,eventsDir:t,owners:o,devMode:n}){this.version=(0,C.default)();this.$commandsDir="./commands";this.$eventsDir="./events";this.$owners=[];this.$devMode=!1;this.spinners={client:(0,m.default)("Starting client...").start(),prisma:(0,m.default)("Starting prisma...").start(),commands:(0,m.default)("Loading commands..."),events:(0,m.default)("Loading events...")};this.$client=new f.Client({intents:["GUILD_MESSAGES","GUILD_MEMBERS","GUILD_PRESENCES","GUILDS"]}),this.$prisma=new D.PrismaClient,this.$prisma.$connect().then(()=>this.spinners.prisma.succeed("Prisma ready")),this.$client.on("ready",()=>v(this,null,function*(){this.setPresence(),this.spinners.client.succeed(`Logged in as ${this.$client.user.tag}`),yield this.$client.application.fetch(),this.$owners.push(this.$client.application.owner.id)})),this.$commandsDir=i||this.$commandsDir,this.$eventsDir=t||this.$eventsDir,this.correctPaths(),this.$devMode=n||this.$devMode,this.verifyOwners(o),this.spinners.commands.start();const d=(0,w.readDir)(this.$commandsDir);this.ApplicationCommands=new u.ApplicationCommandHandler(this.spinners,d),this.spinners.commands.succeed(`Loaded ${this.ApplicationCommands.commands.size} commands`)}setPresence(){this.$client.user.setPresence({activities:[{name:`Using version ${this.version.string}`}]})}correctPaths(){let i;require.main&&(i=require.main.path)&&(this.$commandsDir=(0,h.join)(i,this.$commandsDir),this.$eventsDir=(0,h.join)(i,this.$eventsDir))}verifyOwners(i){for(const t of i)this.$client.users.fetch(t).catch(()=>{throw new Error(`Owner ${t} does not exist.`)}),this.$owners.push(t)}login(i){return new Promise((t,o)=>{this.$client.login(i).catch(o),t(this.$client)})}get client(){return this.$client}get prisma(){return this.$prisma}}module.exports=A(r);0&&(module.exports={Bot});
//# sourceMappingURL=bot.js.map
