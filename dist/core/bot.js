var p=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var w=n=>p(n,"__esModule",{value:!0});var D=(n,e)=>{for(var t in e)p(n,t,{get:e[t],enumerable:!0})},S=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of x(e))!v.call(n,o)&&(t||o!=="default")&&p(n,o,{get:()=>e[o],enumerable:!(r=b(e,o))||r.enumerable});return n};var y=(n=>(e,t)=>n&&n.get(e)||(t=S(w({}),e,1),n&&n.set(e,t),t))(typeof WeakMap!="undefined"?new WeakMap:0);var l=(n,e,t)=>new Promise((r,o)=>{var s=i=>{try{a(t.next(i))}catch(m){o(m)}},c=i=>{try{a(t.throw(i))}catch(m){o(m)}},a=i=>i.done?r(i.value):Promise.resolve(i.value).then(s,c);a((t=t.apply(n,e)).next())});var A={};D(A,{Bot:()=>E});var f=require("@prisma/client"),h=require("discord.js"),u=require("fs"),g=require("path"),C=require("./util/readDir");class E{constructor(e){this.client=new h.Client({intents:["GUILDS","GUILD_MESSAGES","GUILD_MEMBERS"]});this.prisma=new f.PrismaClient;this.commandsDir="commands";this.owners=[];this.testServers=[];this.prefixes=[];this.client.on("ready",()=>{var i,m,d;console.log(`Logged in as ${(i=this.client.user)==null?void 0:i.tag}`),this.prefixes.push(`<@${(m=this.client.user)==null?void 0:m.id}>`),this.prefixes.push(`<@!${(d=this.client.user)==null?void 0:d.id}>`)});const t=JSON.parse((0,u.readFileSync)("./package.json","utf8"));this.version={number:t.version,revision:t.revision,codename:t.codename};const{commandsDir:r,owners:o,prefixes:s,testServers:c}=e;this.commandsDir=r,this.prefixes=s;for(const i of o)this.client.users.fetch(i).catch(()=>{throw new Error(`Owner: ${i} cannot be seen by bot`)});for(const i of c)this.client.guilds.fetch(i).catch(()=>{throw new Error(`Test server: ${i} cannot be seen by bot`)});if(require.main){const{path:i}=require.main;i&&(this.commandsDir=(0,g.join)(i,this.commandsDir))}const a=(0,C.readDir)(this.commandsDir,{ignoreDot:!0}).filter(i=>i.endsWith(".js"));l(this,null,function*(){const{applicationCommands:i,textCommands:m}=yield this.seperateCommands(a);console.log(i,m)})}login(e){this.client.login(e)}seperateCommands(e){return l(this,null,function*(){const t=[],r=[];for(const o of e){let s=yield import(o);s.command?s=s.command:s.default&&(s=s.default),s.isSlash()?t.push(s):s.isText()&&r.push(s)}return{applicationCommands:t,textCommands:r}})}}module.exports=y(A);0&&(module.exports={Bot});
//# sourceMappingURL=bot.js.map
