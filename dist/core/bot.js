var o=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var D=Object.prototype.hasOwnProperty;var C=e=>o(e,"__esModule",{value:!0});var S=(e,i)=>{for(var r in i)o(e,r,{get:i[r],enumerable:!0})},x=(e,i,r,s)=>{if(i&&typeof i=="object"||typeof i=="function")for(let t of w(i))!D.call(e,t)&&(r||t!=="default")&&o(e,t,{get:()=>i[t],enumerable:!(s=v(i,t))||s.enumerable});return e};var $=(e=>(i,r)=>e&&e.get(i)||(r=x(C({}),i,1),e&&e.set(i,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var y={};S(y,{Bot:()=>E});var a=require("@prisma/client"),l=require("discord.js"),p=require("fs"),d=require("path"),f=require("./handlers/ApplicationCommandHandler"),h=require("./util/readDir");class E{constructor(i){this.client=new l.Client({intents:["GUILDS","GUILD_MESSAGES","GUILD_MEMBERS"]});this.prisma=new a.PrismaClient;this.commandsDir="commands";this.owners=[];this.testServers=[];this.prefixes=[];this.client.on("ready",()=>{var n,c,m;console.log(`Logged in as ${(n=this.client.user)==null?void 0:n.tag}`),this.prefixes.push(`<@${(c=this.client.user)==null?void 0:c.id}>`),this.prefixes.push(`<@!${(m=this.client.user)==null?void 0:m.id}>`)});const r=JSON.parse((0,p.readFileSync)("./package.json","utf8"));this.version={number:r.version,revision:r.revision,codename:r.codename};const{commandsDir:s,owners:t,prefixes:u,testServers:g}=i;this.commandsDir=s,this.prefixes=u;for(const n of t)this.client.users.fetch(n).catch(()=>{throw new Error(`Owner: ${n} cannot be seen by bot`)});for(const n of g)this.client.guilds.fetch(n).catch(()=>{throw new Error(`Test server: ${n} cannot be seen by bot`)});if(require.main){const{path:n}=require.main;n&&(this.commandsDir=(0,d.join)(n,this.commandsDir))}const b=(0,h.readDir)(this.commandsDir,{ignoreDot:!0});this.$applicationCommandHandler=new f.ApplciationCommandHandler(b)}login(i){this.client.login(i)}}module.exports=$(y);0&&(module.exports={Bot});
//# sourceMappingURL=bot.js.map
