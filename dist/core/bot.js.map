{
  "version": 3,
  "sources": ["../../src/core/bot.ts"],
  "sourcesContent": ["import { Client } from \"discord.js\";\nimport ora, { Ora } from \"ora\";\nimport { PrismaClient } from \"@prisma/client\";\nimport getVersion, { IVersion } from \"./util/getVersion\";\n\ninterface IBot {\n  readonly $client: Client;\n  readonly $prisma: PrismaClient;\n  readonly version: IVersion;\n\n  login(token: string): Promise<Client | Error>;\n  get client(): Client;\n  get prisma(): PrismaClient;\n}\n\nexport class Bot implements IBot {\n  $client;\n  $prisma;\n  version = getVersion();\n\n  private readonly clientSpinner: Ora = ora(\"Starting client...\").start();\n  private readonly prismaSpinner: Ora = ora(\"Starting prisma...\").start();\n\n  constructor() {\n    this.$client = new Client({\n      intents: [\"GUILD_MESSAGES\", \"GUILD_MEMBERS\", \"GUILD_PRESENCES\", \"GUILDS\"]\n    });\n\n    this.$client.on(\"ready\", () => {\n      this.clientSpinner.succeed(`Logged in as ${this.$client.user!.tag}`);\n\n      this.$client.user!.setPresence({\n        activities: [\n          {\n            name: `Using version ${this.version.string}`\n          }\n        ]\n      });\n    });\n\n    this.$prisma = new PrismaClient();\n\n    this.$prisma.$connect().then(() => this.prismaSpinner.succeed(\"Prisma ready\"));\n  }\n\n  login(token: string): Promise<Client | Error> {\n    return new Promise<Client | Error>((resolve, reject) => {\n      this.$client.login(token).catch(reject);\n      resolve(this.$client);\n    });\n  }\n\n  get client(): Client {\n    return this.$client;\n  }\n\n  get prisma(): PrismaClient {\n    return this.$prisma;\n  }\n}\n\nexport * from \"./constructors/ApplicationCommandConstructor\";\n"],
  "mappings": "qrBAAA,gCAAuB,sBACvB,EAAyB,kBACzB,EAA6B,0BAC7B,EAAqC,gCA0DrC,IAAc,yDA9CP,MAAM,CAAoB,CAQ/B,aAAc,CALd,aAAU,cAAW,EAEJ,mBAAqB,cAAI,oBAAoB,EAAE,MAAM,EACrD,mBAAqB,cAAI,oBAAoB,EAAE,MAAM,EAGpE,KAAK,QAAU,GAAI,UAAO,CACxB,QAAS,CAAC,iBAAkB,gBAAiB,kBAAmB,QAAQ,CAC1E,CAAC,EAED,KAAK,QAAQ,GAAG,QAAS,IAAM,CAC7B,KAAK,cAAc,QAAQ,gBAAgB,KAAK,QAAQ,KAAM,KAAK,EAEnE,KAAK,QAAQ,KAAM,YAAY,CAC7B,WAAY,CACV,CACE,KAAM,iBAAiB,KAAK,QAAQ,QACtC,CACF,CACF,CAAC,CACH,CAAC,EAED,KAAK,QAAU,GAAI,gBAEnB,KAAK,QAAQ,SAAS,EAAE,KAAK,IAAM,KAAK,cAAc,QAAQ,cAAc,CAAC,CAC/E,CAEA,MAAM,EAAwC,CAC5C,MAAO,IAAI,SAAwB,CAAC,EAAS,IAAW,CACtD,KAAK,QAAQ,MAAM,CAAK,EAAE,MAAM,CAAM,EACtC,EAAQ,KAAK,OAAO,CACtB,CAAC,CACH,IAEI,SAAiB,CACnB,MAAO,MAAK,OACd,IAEI,SAAuB,CACzB,MAAO,MAAK,OACd,CACF",
  "names": []
}
