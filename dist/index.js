var v=Object.defineProperty;var r=(e,n)=>v(e,"name",{value:n,configurable:!0});var D=(e,n,t)=>new Promise((o,i)=>{var b=s=>{try{l(t.next(s))}catch(p){i(p)}},w=s=>{try{l(t.throw(s))}catch(p){i(p)}},l=s=>s.done?o(s.value):Promise.resolve(s.value).then(b,w);l((t=t.apply(e,n)).next())});var g=require("dotenv");var h=require("@prisma/client"),C=require("path"),E=require("discord.js");var m=class{constructor(n,t){this._commands=new Map;D(this,null,function*(){for(let o of t){let i=yield import(o);i.default?i=i.default:i.command&&(i=i.command),!!i.isSlash()}})}};r(m,"ApplicationCommandHandler");var a=class extends Error{constructor(...n){super(...n);this.name="RUBY:ERROR"}};r(a,"RubyError");var f=require("path"),u=require("fs"),d=r((e,n)=>{let t=(0,u.readdirSync)(e,{withFileTypes:!0}).filter(i=>n.ignoreDot&&!i.name.startsWith(".")),o=[];for(let i of t)i.isDirectory()?o=[...o,...d((0,f.join)(e,i.name),n)]:o.push((0,f.join)(e,i.name));return o},"readDir");var c=class{constructor(n){this.client=new E.Client({intents:["GUILDS","GUILD_MESSAGES","GUILD_MEMBERS"]});this.prisma=new h.PrismaClient;this.isDev=r(()=>process.env.NODE_ENV==="DEVELOPMENT","isDev");if(this.client.on("ready",()=>{console.log(`Logged in as ${this.client.user.tag}`),this.client.user.setPresence({activities:[{name:"I'm alive!"}]})}),this.commandsDir=n.commandsDir,require.main){let{path:o}=require.main;o&&(this.commandsDir=(0,C.join)(o,this.commandsDir))}let t=d(this.commandsDir,{ignoreDot:!0});this.applicationCommands=new m(this.client,t)}login(n){if(!n)throw new a("No token provided");this.client.login(n).catch(()=>{throw new a("Invalid token")})}};r(c,"Bot");switch(process.env.NODE_ENV){case"PRODUCTION":(0,g.config)();break;case"DEV":(0,g.config)({path:"local.env"});break}var I=new c({commandsDir:"commands"});I.login(process.env.TOKEN);
//# sourceMappingURL=index.js.map
